{% extends 'base.html' %}
{% block title %}Sign up â€” Sentinel{% endblock %}

{% block content %}
<div class="card-panel auth">
  <h2 style="color:var(--accent);margin-bottom:.5rem;">Create account</h2>
  <div class="muted" style="margin-bottom:1rem;">Choose your role (Admin needs a code).</div>

  <form method="post">
    <div class="mb-3">
      <label class="form-label muted">Username</label>
      <input class="form-control" name="username" required>
    </div>

    <div class="mb-3">
      <label class="form-label muted">Password</label>
      <input class="form-control" name="password" type="password" required>
    </div>

    <div class="mb-3">
      <label class="form-label muted">Role</label>
      <div class="d-flex gap-3">
        <div class="form-check">
          <input class="form-check-input" type="radio" name="role" id="rAnalyst" value="analyst" checked>
          <label class="form-check-label" for="rAnalyst">Analyst</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="role" id="rAdmin" value="admin">
          <label class="form-check-label" for="rAdmin">Admin</label>
        </div>
      </div>
    </div>

    <div class="mb-3" id="adminCodeWrap" style="display:none;">
      <label class="form-label muted">Admin code</label>
      <input class="form-control" name="admin_code" placeholder="Enter admin signup code">
      <div class="form-text">Ask an existing admin for this code.</div>
    </div>

    <button class="btn btn-accent w-100" type="submit">Sign Up</button>
    <div class="small-footer">Already have an account? <a href="{{ url_for('login') }}">Login</a></div>
  </form>
</div>

<script>
  const rAdmin = document.getElementById('rAdmin');
  const rAnalyst = document.getElementById('rAnalyst');
  const codeWrap = document.getElementById('adminCodeWrap');
  function toggleCode(){
    codeWrap.style.display = rAdmin.checked ? 'block' : 'none';
  }
  rAdmin.addEventListener('change', toggleCode);
  rAnalyst.addEventListener('change', toggleCode);
  toggleCode();
</script>
{% endblock %}